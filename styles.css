/* iOS-specific font loading optimization */
@font-face {
  font-family: "Open Sans";
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url("https://fonts.gstatic.com/s/opensans/v40/memSYaGs126MiZpBA-UvWbX2vVnXBbObj2OVZyOOSr4dVJWUgsjZ0B4gaVc.woff2")
      format("woff2"),
    local("Open Sans Regular"), local("OpenSans-Regular");
}

@font-face {
  font-family: "Open Sans";
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url("https://fonts.gstatic.com/s/opensans/v40/memSYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTyOOSr4dVJWUgsjZ0B4gaVc.woff2")
      format("woff2"),
    local("Open Sans Bold"), local("OpenSans-Bold");
}

@font-face {
  font-family: "Sakkal Majalla";
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url("https://fonts.gstatic.com/s/sakkalmajalla/v12/U9MD6c-o9H7PgjlTHdpid0Rl_p5Yy-Wr.woff2")
      format("woff2"),
    local("Sakkal Majalla"), local("SakkalMajalla");
}

/* Ensure fonts load properly on all devices */
body {
  font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI",
    Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  font-display: swap;
}

/* Specific font fallbacks for Arabic/RTL text */
.font-sakkal {
  font-family: "Sakkal Majalla", "Times New Roman", "Arabic Typesetting",
    "Traditional Arabic", serif;
  font-display: swap;
}

.font-open-sans {
  font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI",
    Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  font-display: swap;
}

/* Prevent invisible text during font swap */
.font-loading {
  font-display: swap;
  visibility: visible;
}

/* Font loading states */
body {
  opacity: 1;
  transition: opacity 0.3s ease-in-out;
}

body.fonts-loaded {
  opacity: 1;
}

/* Ensure critical text is always visible */
h1,
h2,
h3,
h4,
h5,
h6,
p,
a,
button {
  font-display: swap;
  visibility: visible !important;
}

/* iOS Safari specific optimizations */
@supports (-webkit-touch-callout: none) {
  body {
    -webkit-font-smoothing: antialiased;
    -webkit-text-size-adjust: 100%;
  }

  .font-sakkal,
  .font-open-sans {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

/* Mobile-specific font optimizations */
@media (max-width: 768px) {
  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    -webkit-text-size-adjust: 100%;
  }

  /* Ensure text is visible during font load on mobile */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-display: swap;
    visibility: visible;
    -webkit-font-smoothing: antialiased;
  }

  /* Force hardware acceleration for better performance */
  .font-sakkal,
  .font-open-sans {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }
}

/* iPhone specific fixes */
@media only screen and (max-device-width: 812px) and (-webkit-min-device-pixel-ratio: 2) {
  body {
    -webkit-text-size-adjust: none;
    -webkit-font-smoothing: subpixel-antialiased;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  p,
  a,
  button {
    -webkit-font-smoothing: subpixel-antialiased;
    font-synthesis: none;
  }
}

/* Preload critical fonts */
@media (prefers-reduced-motion: no-preference) {
  .font-sakkal,
  .font-open-sans {
    will-change: font-family;
  }
}
